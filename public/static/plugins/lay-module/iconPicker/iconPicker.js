layui.define(["laypage","form"],function(exports){"use strict";var IconPicker=function(){this.v="0.1.beta"},_MOD="iconPicker",_this=this,$=layui.jquery,laypage=layui.laypage,form=layui.form,BODY="body",TIPS="请选择图标";IconPicker.prototype.render=function(options){var opts=options,elem=opts.elem,type=opts.type==null?"fontClass":opts.type,page=opts.page,limit=limit==null?12:opts.limit,search=opts.search==null?true:opts.search,click=opts.click,data={},tmp=(new Date).getTime(),isFontClass=opts.type==="fontClass",TITLE="layui-select-title",TITLE_ID="layui-select-title-"+tmp,ICON_BODY="layui-iconpicker-"+tmp,PICKER_BODY="layui-iconpicker-body-"+tmp,PAGE_ID="layui-iconpicker-page-"+tmp,LIST_BOX="layui-iconpicker-list-box",selected="layui-form-selected",unselect="layui-unselect";var a={init:function(){data=common.getData[type]();a.hideElem().createSelect().createBody().toggleSelect();common.loadCss();return a},hideElem:function(){$(elem).hide();return a},createSelect:function(){var selectHtml='<div class="layui-iconpicker layui-unselect layui-form-select" id="'+ICON_BODY+'">'+'<div class="'+TITLE+'" id="'+TITLE_ID+'">'+'<div class="layui-iconpicker-item">'+'<span class="layui-iconpicker-icon layui-unselect">'+'<i class="layui-icon">&#xe617;</i>'+"</span>"+'<i class="layui-edge"></i>'+"</div>"+"</div>"+'<div class="layui-anim layui-anim-upbit" style="">'+"123"+"</div>";$(elem).after(selectHtml);return a},toggleSelect:function(){var item="#"+TITLE_ID+" .layui-iconpicker-item,#"+TITLE_ID+" .layui-iconpicker-item .layui-edge";a.event("click",item,function(e){var $icon=$("#"+ICON_BODY);if($icon.hasClass(selected)){$icon.removeClass(selected).addClass(unselect)}else{$icon.addClass(selected).removeClass(unselect)}e.stopPropagation()});return a},createBody:function(){var searchHtml="";if(search){searchHtml='<div class="layui-iconpicker-search">'+'<input class="layui-input">'+'<i class="layui-icon">&#xe615;</i>'+"</div>"}var bodyHtml='<div class="layui-iconpicker-body" id="'+PICKER_BODY+'">'+searchHtml+'<div class="'+LIST_BOX+'"></div> '+"</div>";$("#"+ICON_BODY).find(".layui-anim").eq(0).html(bodyHtml);a.search().createList().check().page();return a},createList:function(text){var d=data,l=d.length,pageHtml="",listHtml=$('<div class="layui-iconpicker-list">');var _limit=limit,_pages=l%_limit===0?l/_limit:parseInt(l/_limit+1),_id=PAGE_ID;var icons=[];for(var i=0;i<l;i++){var obj=d[i];if(text&&obj.indexOf(text)===-1){continue}var icon='<div class="layui-iconpicker-icon-item" title="'+obj+'">';if(isFontClass){icon+='<i class="layui-icon '+obj+'"></i>'}else{icon+='<i class="layui-icon">'+obj.replace("amp;","")+"</i>"}icon+="</div>";icons.push(icon)}l=icons.length;_pages=l%_limit===0?l/_limit:parseInt(l/_limit+1);for(var i=0;i<_pages;i++){var lm=$('<div class="layui-iconpicker-icon-limit" id="layui-iconpicker-icon-limit-'+(i+1)+'">');for(var j=i*_limit;j<(i+1)*_limit&&j<l;j++){lm.append(icons[j])}listHtml.append(lm)}if(l===0){listHtml.append('<p class="layui-iconpicker-tips">无数据</p>')}if(page){$("#"+PICKER_BODY).addClass("layui-iconpicker-body-page");pageHtml='<div class="layui-iconpicker-page" id="'+PAGE_ID+'">'+'<div class="layui-iconpicker-page-count">'+'<span id="'+PAGE_ID+'-current">1</span>/'+'<span id="'+PAGE_ID+'-pages">'+_pages+"</span>"+' (<span id="'+PAGE_ID+'-length">'+l+"</span>)"+"</div>"+'<div class="layui-iconpicker-page-operate">'+'<i class="layui-icon" id="'+PAGE_ID+'-prev" data-index="0" prev>&#xe603;</i> '+'<i class="layui-icon" id="'+PAGE_ID+'-next" data-index="2" next>&#xe602;</i> '+"</div>"+"</div>"}$("#"+ICON_BODY).find(".layui-anim").find("."+LIST_BOX).html("").append(listHtml).append(pageHtml);return a},page:function(){var icon="#"+PAGE_ID+" .layui-iconpicker-page-operate .layui-icon";$(icon).unbind("click");a.event("click",icon,function(e){var elem=e.currentTarget,total=parseInt($("#"+PAGE_ID+"-pages").html()),isPrev=$(elem).attr("prev")!==undefined,index=parseInt($(elem).attr("data-index")),$cur=$("#"+PAGE_ID+"-current"),current=parseInt($cur.html());if(isPrev&&current>1){current=current-1;$(icon+"[prev]").attr("data-index",current)}else if(!isPrev&&current<total){current=current+1;$(icon+"[next]").attr("data-index",current)}$cur.html(current);$(".layui-iconpicker-icon-limit").hide();$("#layui-iconpicker-icon-limit-"+current).show();e.stopPropagation()});return a},search:function(){var item="#"+PICKER_BODY+" .layui-iconpicker-search .layui-input";a.event("input propertychange",item,function(e){var elem=e.target,t=$(elem).val();a.createList(t)});a.event("click",item,function(e){e.stopPropagation()});return a},check:function(){var item="#"+PICKER_BODY+" .layui-iconpicker-icon-item";a.event("click",item,function(e){var el=$(e.currentTarget).find(".layui-icon"),icon="";if(isFontClass){var clsArr=el.attr("class").split(/[\s\n]/),cls=clsArr[1],icon=cls;$("#"+TITLE_ID).find(".layui-iconpicker-item .layui-icon").html("").attr("class",clsArr.join(" "))}else{var cls=el.html(),icon=cls;$("#"+TITLE_ID).find(".layui-iconpicker-item .layui-icon").html(icon)}$("#"+ICON_BODY).removeClass(selected).addClass(unselect);$(elem).attr("value",icon);if(click){click({icon:icon})}});return a},event:function(evt,el,fn){$(BODY).on(evt,el,fn)}};var common={loadCss:function(){var css=".layui-iconpicker {max-width: 280px;}.layui-iconpicker .layui-anim{display:none;position:absolute;left:0;top:42px;padding:5px 0;z-index:899;min-width:100%;border:1px solid #d2d2d2;max-height:300px;overflow-y:auto;background-color:#fff;border-radius:2px;box-shadow:0 2px 4px rgba(0,0,0,.12);box-sizing:border-box;}.layui-iconpicker-item{border:1px solid #e6e6e6;width:90px;height:38px;border-radius:4px;cursor:pointer;position:relative;}.layui-iconpicker-icon{border-right:1px solid #e6e6e6;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;width:60px;height:100%;float:left;text-align:center;background:#fff;transition:all .3s;}.layui-iconpicker-icon i{line-height:38px;font-size:18px;}.layui-iconpicker-item > .layui-edge{left:70px;}.layui-iconpicker-item:hover{border-color:#D2D2D2!important;}.layui-iconpicker-item:hover .layui-iconpicker-icon{border-color:#D2D2D2!important;}.layui-iconpicker.layui-form-selected .layui-anim{display:block;}.layui-iconpicker-body{padding:6px;}.layui-iconpicker .layui-iconpicker-list{background-color:#fff;border:1px solid #ccc;border-radius:4px;}.layui-iconpicker .layui-iconpicker-icon-item{display:inline-block;width:21.1%;line-height:36px;text-align:center;cursor:pointer;vertical-align:top;height:36px;margin:4px;border:1px solid #ddd;border-radius:2px;transition:300ms;}.layui-iconpicker .layui-iconpicker-icon-item i.layui-icon{font-size:17px;}.layui-iconpicker .layui-iconpicker-icon-item:hover{background-color:#eee;border-color:#ccc;-webkit-box-shadow:0 0 2px #aaa,0 0 2px #fff inset;-moz-box-shadow:0 0 2px #aaa,0 0 2px #fff inset;box-shadow:0 0 2px #aaa,0 0 2px #fff inset;text-shadow:0 0 1px #fff;}.layui-iconpicker-search{position:relative;margin:0 0 6px 0;border:1px solid #e6e6e6;border-radius:2px;transition:300ms;}.layui-iconpicker-search:hover{border-color:#D2D2D2!important;}.layui-iconpicker-search .layui-input{cursor:text;display:inline-block;width:86%;border:none;padding-right:0;margin-top:1px;}.layui-iconpicker-search .layui-icon{position:absolute;top:11px;right:4%;}.layui-iconpicker-tips{text-align:center;padding:8px 0;cursor:not-allowed;}.layui-iconpicker-page{margin-top:6px;margin-bottom:-6px;font-size:12px;padding:0 2px;}.layui-iconpicker-page-count{display:inline-block;}.layui-iconpicker-page-operate{display:inline-block;float:right;cursor:default;}.layui-iconpicker-page-operate .layui-icon{font-size:12px;cursor:pointer;}.layui-iconpicker-body-page .layui-iconpicker-icon-limit{display:none;}.layui-iconpicker-body-page .layui-iconpicker-icon-limit:first-child{display:block;}";$("head").append('<style rel="stylesheet">'+css+"</style>")},getData:{fontClass:function(){var arr=["layui-icon-github","layui-icon-moon","layui-icon-error","layui-icon-success","layui-icon-question","layui-icon-lock","layui-icon-eye","layui-icon-eye-invisible","layui-icon-clear","layui-icon-backspace","layui-icon-disabled","layui-icon-tips-fill","layui-icon-test","layui-icon-music","layui-icon-chrome","layui-icon-firefox","layui-icon-edge","layui-icon-ie","layui-icon-heart-fill","layui-icon-heart","layui-icon-light","layui-icon-time","layui-icon-bluetooth","layui-icon-at","layui-icon-mute","layui-icon-mike","layui-icon-key","layui-icon-gift","layui-icon-email","layui-icon-rss","layui-icon-wifi","layui-icon-logout","layui-icon-android","layui-icon-ios","layui-icon-windows","layui-icon-transfer","layui-icon-service","layui-icon-subtraction","layui-icon-addition","layui-icon-slider","layui-icon-print","layui-icon-export","layui-icon-cols","layui-icon-screen-restore","layui-icon-screen-full","layui-icon-rate-half","layui-icon-rate","layui-icon-rate-solid","layui-icon-cellphone","layui-icon-vercode","layui-icon-login-wechat","layui-icon-login-qq","layui-icon-login-weibo","layui-icon-password","layui-icon-username","layui-icon-refresh-3","layui-icon-auz","layui-icon-spread-left","layui-icon-shrink-right","layui-icon-snowflake","layui-icon-tips","layui-icon-note","layui-icon-home","layui-icon-senior","layui-icon-refresh","layui-icon-refresh-1","layui-icon-flag","layui-icon-theme","layui-icon-notice","layui-icon-website","layui-icon-console","layui-icon-face-surprised","layui-icon-set","layui-icon-template-1","layui-icon-app","layui-icon-template","layui-icon-praise","layui-icon-tread","layui-icon-male","layui-icon-female","layui-icon-camera","layui-icon-camera-fill","layui-icon-more","layui-icon-more-vertical","layui-icon-rmb","layui-icon-dollar","layui-icon-diamond","layui-icon-fire","layui-icon-return","layui-icon-location","layui-icon-read","layui-icon-survey","layui-icon-face-smile","layui-icon-face-cry","layui-icon-cart-simple","layui-icon-cart","layui-icon-next","layui-icon-prev","layui-icon-upload-drag","layui-icon-upload","layui-icon-download-circle","layui-icon-component","layui-icon-file-b","layui-icon-user","layui-icon-find-fill","layui-icon-loading","layui-icon-loading-1","layui-icon-add-1","layui-icon-play","layui-icon-pause","layui-icon-headset","layui-icon-video","layui-icon-voice","layui-icon-speaker","layui-icon-fonts-del","layui-icon-fonts-code","layui-icon-fonts-html","layui-icon-fonts-strong","layui-icon-unlink","layui-icon-picture","layui-icon-link","layui-icon-face-smile-b","layui-icon-align-left","layui-icon-align-right","layui-icon-align-center","layui-icon-fonts-u","layui-icon-fonts-i","layui-icon-tabs","layui-icon-radio","layui-icon-circle","layui-icon-edit","layui-icon-share","layui-icon-delete","layui-icon-form","layui-icon-cellphone-fine","layui-icon-dialogue","layui-icon-fonts-clear","layui-icon-layer","layui-icon-date","layui-icon-water","layui-icon-code-circle","layui-icon-carousel","layui-icon-prev-circle","layui-icon-layouts","layui-icon-util","layui-icon-templeate-1","layui-icon-upload-circle","layui-icon-tree","layui-icon-table","layui-icon-chart","layui-icon-chart-screen","layui-icon-engine","layui-icon-triangle-d","layui-icon-triangle-r","layui-icon-file","layui-icon-set-sm","layui-icon-reduce-circle","layui-icon-add-circle","layui-icon-404","layui-icon-about","layui-icon-up","layui-icon-down","layui-icon-left","layui-icon-right","layui-icon-circle-dot","layui-icon-search","layui-icon-set-fill","layui-icon-group","layui-icon-friends","layui-icon-reply-fill","layui-icon-menu-fill","layui-icon-log","layui-icon-picture-fine","layui-icon-face-smile-fine","layui-icon-list","layui-icon-release","layui-icon-ok","layui-icon-help","layui-icon-chat","layui-icon-top","layui-icon-star","layui-icon-star-fill","layui-icon-close-fill","layui-icon-close","layui-icon-ok-circle","layui-icon-add-circle-fine"];return arr},unicode:function(){return["&#xe6a7;","&#xe6c2;","&#xe693;","&#xe697;","&#xe699;","&#xe69a;","&#xe695;","&#xe696;","&#xe788;","&#xe694;","&#xe6cc;","&#xeb2e;","&#xe692;","&#xe690;","&#xe68a;","&#xe686;","&#xe68b;","&#xe7bb;","&#xe68f;","&#xe68c;","&#xe748;","&#xe68d;","&#xe689;","&#xe687;","&#xe685;","&#xe6dc;","&#xe683;","&#xe627;","&#xe618;","&#xe808;","&#xe7e0;","&#xe682;","&#xe684;","&#xe680;","&#xe67f;","&#xe691;","&#xe626;","&#xe67e;","&#xe624;","&#xe714;","&#xe66d;","&#xe67d;","&#xe610;","&#xe758;","&#xe622;","&#xe6c9;","&#xe67b;","&#xe67a;","&#xe678;","&#xe679;","&#xe677;","&#xe676;","&#xe675;","&#xe673;","&#xe66f;","&#xe9aa;","&#xe672;","&#xe66b;","&#xe668;","&#xe6b1;","&#xe702;","&#xe66e;","&#xe68e;","&#xe674;","&#xe669;","&#xe666;","&#xe66c;","&#xe66a;","&#xe667;","&#xe7ae;","&#xe665;","&#xe664;","&#xe716;","&#xe656;","&#xe653;","&#xe663;","&#xe6c6;","&#xe6c5;","&#xe662;","&#xe661;","&#xe660;","&#xe65d;","&#xe65f;","&#xe671;","&#xe65e;","&#xe659;","&#xe735;","&#xe756;","&#xe65c;","&#xe715;","&#xe705;","&#xe6b2;","&#xe6af;","&#xe69c;","&#xe698;","&#xe657;","&#xe65b;","&#xe65a;","&#xe681;","&#xe67c;","&#xe601;","&#xe857;","&#xe655;","&#xe770;","&#xe670;","&#xe63d;","&#xe63e;","&#xe654;","&#xe652;","&#xe651;","&#xe6fc;","&#xe6ed;","&#xe688;","&#xe645;","&#xe64f;","&#xe64e;","&#xe64b;","&#xe62b;","&#xe64d;","&#xe64a;","&#xe64c;","&#xe650;","&#xe649;","&#xe648;","&#xe647;","&#xe646;","&#xe644;","&#xe62a;","&#xe643;","&#xe63f;","&#xe642;","&#xe641;","&#xe640;","&#xe63c;","&#xe63b;","&#xe63a;","&#xe639;","&#xe638;","&#xe637;","&#xe636;","&#xe635;","&#xe634;","&#xe633;","&#xe632;","&#xe631;","&#xe630;","&#xe62f;","&#xe62e;","&#xe62d;","&#xe62c;","&#xe629;","&#xe628;","&#xe625;","&#xe623;","&#xe621;","&#xe620;","&#xe616;","&#xe61f;","&#xe61c;","&#xe60b;","&#xe619;","&#xe61a;","&#xe603;","&#xe602;","&#xe617;","&#xe615;","&#xe614;","&#xe613;","&#xe612;","&#xe611;","&#xe60f;","&#xe60e;","&#xe60d;","&#xe60c;","&#xe60a;","&#xe609;","&#xe605;","&#xe607;","&#xe606;","&#xe604;","&#xe600;","&#xe658;","&#x1007;","&#x1006;","&#x1005;","&#xe608;"]}}};a.init();return new IconPicker};IconPicker.prototype.checkIcon=function(filter,iconName){var p=$("*[lay-filter="+filter+"]").next().find(".layui-iconpicker-item .layui-icon"),c=iconName;if(c.indexOf("#xe")>0){p.html(c)}else{p.html("").attr("class","layui-icon "+c)}};var iconPicker=new IconPicker;exports(_MOD,iconPicker)});