"use strict";layui.define(["layer","element","dropdown"],function(e){var a=layui.$,t=layui.element,o=layui.layer;layui.dropdown;if(t.init(),!/http(s*):\/\//.test(location.href)){return Fun.toastr.alert("请先将项目部署至web容器（Apache/Tomcat/Nginx/IIS/等），否则部分数据将无法显示")}var i=a(document),l=a("#fun-app"),n="layui-side-shrink",r=[{headerBg:"#fff",headerfontColor:"#595959",headerBgThis:"#772c6a",headerBgLogo:"#0c0c0c",headerLogofontColor:"#fff",menuLeftBg:"#23262e",menuLeftBgThis:"#772c6a",menuLeftBgHover:"#772c6a",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#fff",headerfontColor:"#595959",headerBgThis:"#197971",headerBgLogo:"#0c0c0c",headerLogofontColor:"#fff",menuLeftBg:"#23262e",menuLeftBgThis:"#20b598",menuLeftBgHover:"#20b598",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#fff",headerfontColor:"#595959",headerBgThis:"#722ed1",headerBgLogo:"#0c0c0c",headerLogofontColor:"#fff",menuLeftBg:"#23262e",menuLeftBgThis:"#722ed1",menuLeftBgHover:"#722ed1",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#fff",headerfontColor:"#595959",headerBgThis:"#772c6a",headerBgLogo:"#fff",headerLogofontColor:"#595959",menuLeftBg:"#23262e",menuLeftBgThis:"#772c6a",menuLeftBgHover:"#772c6a",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#fff",headerfontColor:"#595959",headerBgThis:"#197971",headerBgLogo:"#fff",headerLogofontColor:"#595959",menuLeftBg:"#23262e",menuLeftBgThis:"#20b598",menuLeftBgHover:"#20b598",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#fff",headerfontColor:"#595959",headerBgThis:"#722ed1",headerBgLogo:"#fff",headerLogofontColor:"#595959",menuLeftBg:"#23262e",menuLeftBgThis:"#722ed1",menuLeftBgHover:"#722ed1",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#20b598",headerfontColor:"#fff",headerBgThis:"#197971",headerBgLogo:"#0c0c0c",headerLogofontColor:"#fff",menuLeftBg:"#23262e",menuLeftBgThis:"#20b598",menuLeftBgHover:"#20b598",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#20b598",headerfontColor:"#fff",headerBgThis:"#197971",headerBgLogo:"#20b598",headerLogofontColor:"#fff",menuLeftBg:"#2f4056",menuLeftBgThis:"#20b598",menuLeftBgHover:"#20b598",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#00a65a",headerBgThis:"#197971",headerBgLogo:"#00a65a",headerLogofontColor:"#fff",menuLeftBg:"#222d32",menuLeftBgThis:"#00a65a",menuLeftBgHover:"#00a65a",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#722ed1",headerfontColor:"#fff",headerBgThis:"#197971",headerBgLogo:"#722ed1",headerLogofontColor:"#fff",menuLeftBg:"#2f4056",menuLeftBgThis:"#722ed1",menuLeftBgHover:"#722ed1",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#23262e",headerfontColor:"#fff",headerBgThis:"#0c0c0c",headerBgLogo:"#0c0c0c",headerLogofontColor:"#fff",menuLeftBg:"#23262e",menuLeftBgThis:"#20b598",menuLeftBgHover:"#3b3f4b",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#ffa4d1",headerfontColor:"#fff",headerBgThis:"#bf7b9d",headerBgLogo:"#e694bd",headerLogofontColor:"#fff",menuLeftBg:"#1f1f1f",menuLeftBgThis:"#ffa4d1",menuLeftBgHover:"#ffa4d1",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#1e9fff",headerfontColor:"#fff",headerBgThis:"#0069b7",headerBgLogo:"#0c0c0c",headerLogofontColor:"#fff",menuLeftBg:"#1f1f1f",menuLeftBgThis:"#1e9fff",menuLeftBgHover:"#1e9fff",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#963885",headerfontColor:"#fff",headerBgThis:"#772c6a",headerBgLogo:"#243346",headerLogofontColor:"#fff",menuLeftBg:"#191a23",menuLeftBgThis:"#963885",menuLeftBgHover:"#963885",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#963885",headerfontColor:"#fff",headerBgThis:"#772c6a",headerBgLogo:"#772c6a",headerLogofontColor:"#fff",menuLeftBg:"#191a23",menuLeftBgThis:"#963885",menuLeftBgHover:"#963885",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#1e9fff",headerfontColor:"#fff",headerBgThis:"#0069b7",headerBgLogo:"#0069b7",headerLogofontColor:"#fff",menuLeftBg:"#1f1f1f",menuLeftBgThis:"#1e9fff",menuLeftBgHover:"#1e9fff",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#ffb800",headerfontColor:"#fff",headerBgThis:"#d09600",headerBgLogo:"#243346",headerLogofontColor:"#fff",menuLeftBg:"#2f4056",menuLeftBgThis:"#ffb800",menuLeftBgHover:"#ffb800",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#ffb800",headerfontColor:"#fff",headerBgThis:"#d09600",headerBgLogo:"#d09600",headerLogofontColor:"#fff",menuLeftBg:"#2f4056",menuLeftBgThis:"#ffb800",menuLeftBgHover:"#ffb800",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#e82121",headerfontColor:"#fff",headerBgThis:"#ae1919",headerBgLogo:"#0c0c0c",headerLogofontColor:"#fff",menuLeftBg:"#1f1f1f",menuLeftBgThis:"#e82121",menuLeftBgHover:"#e82121",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#e82121",headerfontColor:"#fff",headerBgThis:"#ae1919",headerBgLogo:"#d91f1f",headerLogofontColor:"#fff",menuLeftBg:"#1f1f1f",menuLeftBgThis:"#e82121",menuLeftBgHover:"#e82121",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"},{headerBg:"#e82121",headerfontColor:"#fff",headerBgThis:"#ae1919",headerBgLogo:"#772c6a",headerLogofontColor:"#fff",menuLeftBg:"#1f1f1f",menuLeftBgThis:"#e82121",menuLeftBgHover:"#e82121",menuLeftDlBg:"rgba(0,0,0,.3)",menuLeftfontColor:"rgba(255,255,255,.7)",menuLeftfontColorHover:"#fff"}],u={v:"2.0.0",render:function(e){e.refreshUrl=e.refreshUrl||Fun.url("ajax/clearcache"),e.themeid=e.themeid||0,e.maxTabs=e.maxTabs||15,r=e.theme?e.theme:r,u.initTabs({filter:"layui-layout-tabs",maxTabs:e.maxTabs}),u.hideLoading(e.loadingTime),u.initBodyTheme(),u.initBgColor(),u.api.bindEvent()},initBodyTheme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"setTab";arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a(".layui-side-menu .layui-nav-item").removeClass("layui-nav-hover"),a(".layui-side-menu .layui-nav-item").find("dl").removeClass("layui-nav-child-drop").removeAttr("style"),a(".layui-layout-admin .layui-nav-header").length>0&&(height=a(".layui-nav-header ul").height(),a(".layui-layout-admin .layui-pagetabs").attr("style","top:"+(60+height)+"px!important;"),a(".layui-layout-admin .layui-body").attr("style","padding-bottom:"+(20+height)+"px!important;")),value=Fun.api.getStorage(e),value&&1==value?(a(".layui-tabs-control.layui-icon-prev,.layui-tabs-control.layui-icon-next,.layui-tabs-control.layui-icon-down,#layui-tab-header").removeClass("layui-hide"),a("#layui-app-body").animate({top:40},100)):value&&2==value&&(a(".layui-tabs-control.layui-icon-prev,.layui-tabs-control.layui-icon-next,.layui-tabs-control.layui-icon-down,#layui-tab-header").addClass("layui-hide"),a("#layui-app-body").animate({top:0},100)),!1},hideLoading:function(e){e=e||350;var t=u.getColorId(),i=r[t].menuLeftBgThis;t&&a(document).find(".fun-loading").find("span").css("background-color",r[t].menuLeftBgHover),setTimeout(function(){a(document).find(".fun-loading").fadeOut(),Fun.api.getStorage("BackendLock")&&o.prompt({btn:[__("Unlock Now")],title:[__("Input Password"),"background:"+i+";color:"+r[t].menuLeftfontColor],closeBtn:0,formType:1,success:function(e,a){e.find(".layui-layer-btn0").css("background",i)}},function(e,a){return e.length<1?(Fun.toastr.error(__("Input Password")),!1):e!==Fun.api.getStorage("BackendLock")?(Fun.toastr.error(__("Password Error")),!1):(Fun.toastr.close(a),Fun.api.setStorage("BackendLock",null),Fun.toastr.success(__("Unlock Success")),void 0)})},e)},initTabs:function(e){e.filter=e.filter||null,e.maxTabs=e.maxTabs||15,u.listenScroll(),u.listenSwitch(e),u.listenTabs(e),u.listenDeltab(e),u.listenFrameTheme()},fullScreen:function(){var e=document.documentElement,a=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;void 0!==a&&a&&a.call(e)},exitScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},checkScreen:function(){var e=navigator.userAgent.toLocaleLowerCase(),t=navigator.platform.toLocaleLowerCase(),o=/android/i.test(e)||/iPhone|iPod|iPad/i.test(e)&&/linux/i.test(t)||/ucweb.*linux/i.test(e),i=/iPhone|iPod|iPad/i.test(e)&&!o,l=/Windows Phone|ZuneWP7/i.test(e),n=a(window),r=n.width();return!(!o&&!i&&!l&&r>768)},sideFlexible:function(){l.toggleClass(n),l.toggleClass("fun-app"),a(".layui-header #layui-header-nav-pc,.layui-header #layui-header-nav-mobile").toggleClass("layui-layout-nav"),a(".layui-side-shrink .layui-side-menu .layui-nav-item").removeClass("layui-nav-hover")},listenTabs:function(e){var o=layui.sessionData("funTabInfo"),i=layui.sessionData("tabLayId"),l=i.id;if(null===l||void 0===l)return!1;o&&a("#layui-side-left-menu [data-url]").each(function(){var o=a(this).attr("lay-id");if(o===l){var i=a(this).data("tips")||a(this).attr("title"),n=a(this).data("url"),r=a(this).find("i").attr("class");a(this).parents(".layui-nav-item").addClass("active"),u.addTab({layId:o,url:n,text:i,icon:r,maxTabs:e.maxTabs}),t.tabChange("layui-layout-tabs",l)}})},delTab:function(e,o){null!=layui.sessionData("funTabInfo")&&layui.sessionData("funTabInfo",{key:e,remove:!0}),!0===o?parent.layui.element.tabDelete("layui-tabs",e):t.tabDelete("layui-layout-tabs",e),e=a("#layui-app-tabs .layui-tab .layui-tab-title").find(".layui-this").attr("lay-id"),u.changeSessioinTabId(e),a("#layui-nav-righmenu").remove()},addTab:function(e){if(e.layId=e.layId||null,e.url=e.url||null,e.text=e.text||null,e.icon=e.icon||null,e.iframe=e.iframe||null,a("#layui-app-tabs .layui-tab .layui-tab-title li").length>=e.maxTabs)return Fun.toastr.error(__("window is create by maxnum")),!1;u.changeSessioinTabId(e.layId),layui.sessionData("funTabInfo",{key:e.layId,value:e.layId});var i=t;e.iframe&&(i=parent.layui.element);var l,n=u.checkLayId(e.layId);n?(l=o.load(),a("#layui-app-tabs .layui-tab-content .layui-show").find("iframe")[0].contentWindow.location.reload()):(l=o.load(),i.tabAdd("layui-layout-tabs",{title:' <i class="'+e.icon+'"></i><cite>'+e.text+"</cite>",content:'<iframe id="'+e.layId+'" width="100%" height="100%" frameborder="no" src="'+e.url+'"></iframe>',id:e.layId})),a("#layui-nav-righmenu").remove(),o.close(l),i.tabChange("layui-layout-tabs",e.layId)},changeSessioinTabId:function(e){e?layui.sessionData("tabLayId",{key:"id",value:e}):layui.sessionData("tabLayId",null)},checkLayId:function(e){var t=!1;return a("#layui-app-tabs .layui-tab .layui-tab-title li").each(function(){var o=a(this).attr("lay-id");null!=o&&o===e&&(t=!0)}),!1!==t},getColorId:function(){var e=Fun.api.getStorage("funColorId");return e=e||0},buildBgColorHtml:function(){var e="",t=u.getColorId();return a.each(r,function(a,o){e+=a===t?'<li class="layui-this" lay-event="setThemeColor" data-color="'+a+'">\n':'<li  lay-event="setThemeColor" data-color="'+a+'">\n',e+='<a href="javascript:;" data-skin="skin-blue" style="" class="clearfix full-opacity-hover">\n<div><span style="display:block; width: 20%; float: left; height: 12px; background: '+o.headerBgLogo+';"></span><span style="display:block; width: 80%; float: left; height: 12px; background: '+o.headerBg+';"></span></div>\n<div><span style="display:block; width: 20%; float: left; height: 40px; background: '+o.menuLeftBg+';"></span><span style="display:block; width: 80%; float: left; height: 40px; background: #f4f5f7;"></span></div>\n</a>\n</li>'}),e},initBgColor:function(){var e=u.getColorId(),t=r[e],o=".layui-layout-admin .layui-header ul li a{color:"+t.headerfontColor+"!important;}.layui-layout-admin .layui-header{background-color:"+t.headerBg+"!important;}\n.layui-header>ul>.layui-nav-item.layui-this:hover{color:"+t.headerBgThis+"!important;}\n.layui-layout-admin .layui-logo {background-color:"+t.headerBgLogo+"!important;}\n.layui-layout-admin .layui-logo{color:"+t.headerfontColor+"!important;}\n.layui-layout-admin .layui-logo cite{color:"+t.headerLogofontColor+"!important;}\n.layui-layout-admin .layui-side-scroll .layui-nav-tree .layui-nav-item a{color:"+t.menuLeftfontColor+"}\n.layui-layout-admin .layui-side-scroll .layui-nav-tree .layui-nav-item>a:hover{color:"+t.menuLeftfontColorHover+"!important;}\n.layui-layout-admin .layui-side-scroll .layui-nav-tree .layui-nav-item>a:hover{background-color:"+t.menuLeftBgHover+"!important;}\n.layui-layout-admin .layui-side-scroll .layui-nav-tree .layui-nav-item>.layui-nav-child:before{background-color:"+t.menuLeftBg+"!important;}\n.layui-layout-admin .layui-side-scroll .layui-nav-tree>.layui-nav-item>a:before{background-color:"+t.menuLeftBgHover+"!important;}\n.layui-side.layui-bg-black,.layui-side.layui-bg-black>.layui-side-scroll>ul {background-color:"+t.menuLeftBg+"!important;}\n.layui-side-scroll .layui-nav .layui-nav-child a:hover:not(.layui-this){background-color:"+t.menuLeftBgHover+"!important;}\n.layui-layout-admin .layui-nav-tree .layui-this,.layui-layout-admin .layui-nav-tree .layui-this>a,.layui-layout-admin .layui-nav-tree .layui-nav-child dd.layui-this,.layui-layout-admin .layui-nav-tree .layui-nav-child dd.layui-this a {background-color: "+t.menuLeftBgThis+" !important;}\n.layui-pagetabs .layui-tab-title li:hover,.layui-pagetabs .layui-tab-title li.layui-this{ color:"+t.menuLeftBgThis+"!important;}\n.layui-layout-admin .layui-nav-tree .layui-nav-bar{background:"+t.menuLeftBgThis+"!important;}\n";a("#fun-bg-color").html(o),u.listenFrameTheme()},listenSwitch:function(e){e.filter=e.filter||null,t.on("tab("+e.filter+")",function(){var e=a(this).attr("lay-id");u.changeSessioinTabId(e),u.listenSwitchIframe(e),u.scrollPostion()})},listenFrameTheme:function(){Fun.api.setFrameTheme()},listenDeltab:function(e){e.filter=e.filter||null,t.on("tabDelete("+e.filter+")",function(){var e=a(this).parent().attr("lay-id");u.delTab(e)})},listenScroll:function(e){var t=a("#layui-app-tabs .layui-tab  .layui-tab-title"),o=t.scrollLeft();"left"===e?t.animate({scrollLeft:o-550},100):t.animate({scrollLeft:o+550},100)},listenSwitchIframe:function(e){a("#layui-side-left-menu").find("li,dd").removeClass("layui-this").removeClass("layui-nav-itemed"),a("#layui-side-left-menu > li dl.layui-nav-child").removeAttr("style"),a("#layui-side-left-menu a[data-url]").each(function(){a(this).attr("lay-id")===e&&(a(this).parents("dd").addClass("layui-nav-itemed"),a(this).parents("li").addClass("layui-nav-itemed"),a(this).parent().removeClass("layui-nav-itemed").addClass("layui-this"))})},scrollPostion:function(){var e=a("#layui-app-tabs .layui-tab .layui-tab-title"),t=0;e.children("li").each(function(){if(a(this).hasClass("layui-this"))return!1;t+=a(this).outerWidth()}),e.animate({scrollLeft:t-e.width()/4},200)},events:{opentheme:function(){var e=o.load(0,{shade:!1,time:2e3}),a=document.documentElement.clientHeight-60,t=u.buildBgColorHtml(),i=[0,1,2,3,4,5,6],l=i[Math.floor(Math.random()*i.length+1)-1],n='<style>.layui-text-left{text-align: left;padding:padding-right: 0px}.layui-form-item .layui-quote-nm{margin:10px;border-left: 5px solid #772c6a!important;}</style><div class="layui-fun-color">\n<div class="color-title">\n<span>'+__("Theme Color")+'</span>\n</div>\n<div class="color-content">\n<ul style="border-bottom: 1px solid #e8e8e8;">\n'+t+'</ul>\n</div><form class="layui-form" lay-filter="form" action="">\n <div class="layui-form-item">\n        <label class="layui-form-label" style="text-align: left;width: auto;">菜单导航：</label>\n        <div class="layui-input-inline" style="width: auto;">\n            <input lay-filter="setTheme" type="radio" value="1" title="侧边" name="site_theme">            <input lay-filter="setTheme" type="radio" value="2" title="水平" name="site_theme">            <input lay-filter="setTheme" type="radio" value="3" title="顶部" name="site_theme">        </div>\n</div> <div class="layui-form-item">\n        <label class="layui-form-label" style="text-align: left;width: auto;">选项卡：</label>\n        <div class="layui-input-inline" style="width: auto;">\n            <input lay-filter="setTab" type="radio" value="1" title="显示" name="setTab">            <input lay-filter="setTab" type="radio" value="2" title="隐藏" name="setTab">        </div>\n</div> <div class="layui-form-item">\n        <label class="layui-form-label" style="text-align: left;width: auto;">页面主题：</label>\n        <div class="layui-input-inline" style="width: auto;">\n            <input lay-filter="setFrameTheme" type="radio" value="1" title="开启" name="setFrameTheme">            <input lay-filter="setFrameTheme" type="radio" value="" title="关闭" name="setFrameTheme">        </div>\n</div></form><fieldset class="layui-elem-field layui-field-title layui-text-left" >\n              <legend class="">版权信息</legend>\n            </fieldset><div class="layui-form-item" style="">\n                <blockquote class="layui-elem-quote layui-text-left layui-quote-nm" >\n                    <i class="layui-icon layui-icon-about"></i>\n                    <span class="layui-font-12">&nbsp; 版权归FunAdmin所有<br>\n                        如遇到问题，请点击 <a href="http://www.funadmin.com/" target="_blank" style="color: red">官方文档</a> 查看源码说明！\n                    </span>\n                </blockquote>\n            </div>';o.open({type:1,title:!1,closeBtn:0,shade:.2,anim:l,shadeClose:!0,isOutAnim:!0,id:"layui-fun-color",area:["360px",a+"px"],offset:"rb",content:n}),data={site_theme:Fun.api.getStorage("siteTheme"),setTab:Fun.api.getStorage("setTab"),setFrameTheme:Fun.api.getStorage("setFrameTheme")},data.site_theme&&data.site_theme,layui.form.val("form",data),layui.form.render(),o.close(e)},setThemeColor:function(e){var t=e.attr("data-color");a(".layui-fun-color .color-content ul .layui-this").attr("class",""),a(this).attr("class","layui-this"),Fun.api.setStorage("funColorId",t),Fun.api.getStorage("funColorId"),u.initBgColor()},lockScreen:function(){var e=u.getColorId();o.prompt({btn:[__("Lock Now")],title:[__("Set Password To Lock Screen"),"background:"+r[e].menuLeftBgThis+";color:"+r[e].menuLeftfontColor],formType:1,success:function(a,t){a.find(".layui-layer-btn0").css("background",r[e].menuLeftBgThis)},yes:function(t,i){var l=i.find(".layui-layer-input").val();if(l.length<1)return Fun.toastr.error(__("Input Password")),!1;Fun.api.setStorage("BackendLock",l),o.close(t),o.prompt({btn:[__("Unlock")],title:[__("Input Password"),"background:"+r[e].menuLeftBgThis+";color:"+r[e].menuLeftfontColor],closeBtn:0,formType:1,success:function(a,t){a.find(".layui-layer-btn0").css("background",r[e].menuLeftBgThis)}},function(e,t){return e.length<1?(Fun.toastr.error(__("Input Password")),!1):e!==Fun.api.getStorage("BackendLock")?(Fun.toastr.error(__("Password Error")),!1):(o.close(t),a(".yy").hide(),Fun.api.setStorage("BackendLock",null),Fun.toastr.success(__("Unlock Success")),void 0)})}},function(e,a){})},flexible:function(){u.sideFlexible()},rightPage:function(){u.listenScroll("right")},leftPage:function(){u.listenScroll("left")},showtips:function(e,a){if(l.hasClass(n))if(1===a){if(e.children("dl").length>0)return!1;var t=e.data("tips")||e.children("a").data("tips");o.tips(t,e,{time:1e3})}else o.close()},fullscreen:function(e){var a="layui-icon-screen-full",t=e.children("i");t.hasClass(a)?(u.fullScreen(),t.addClass("layui-icon-screen-restore").removeClass(a)):(u.exitScreen(),t.addClass(a).removeClass("layui-icon-screen-restore"))},shade:function(){u.sideFlexible()},clear:function(e){layui.sessionData("funTabInfo",{key:"fun-safe",value:""}),layui.sessionData("funTabInfo",{key:"fun-info",value:""});var t=e.data("ajax")?e.data("ajax"):u.refreshUrl;Fun.ajax({url:t},function(e){Fun.toastr.success(e.msg),a("#layui-app-tabs .layui-tab-content .layui-show").find("iframe")[0].contentWindow.location.reload()},function(e){Fun.toastr.error(e.msg),a("#layui-app-tabs .layui-tab-content .layui-show").find("iframe")[0].contentWindow.location.reload()})},refresh:function(){Fun.toastr.success(__("Refresh Success")),Fun.toastr.loading("",setTimeout(function(){a("#layui-app-tabs .layui-tab-content .layui-show").find("iframe")[0].contentWindow.location.reload(),Fun.toastr.close()},1200))},closeThisTabs:function(){var e=a("#layui-app-tabs .layui-tab .layui-tab-title li.layui-this").attr("lay-id");e&&u.delTab(e)},closeOtherTabs:function(e){a("#layui-app-tabs .layui-tab .layui-tab-title li").each(function(t,o){var i=a(o).attr("lay-id");"all"===e&&i?u.delTab(i):i&&!a(this).hasClass("layui-this")&&u.delTab(i)})},closeAllTabs:function(){u.events.closeOtherTabs("all")},logout:function(e){var a=e.data("ajax");Fun.toastr.confirm(__("Are you sure todo this"),function(){Fun.ajax({url:a,method:"post"},function(e){e.code>0?Fun.toastr.success(e.msg,setTimeout(function(){window.location=e.url},2e3)):Fun.toastr.error(e.msg)})})},langset:function(e){var a=e.data("ajax");Fun.ajax({url:a},function(e){Fun.toastr.success(e.msg,setTimeout(function(){window.location.reload()},1500))},function(e){Fun.toastr.error(e.msg)})}},api:{bindEvent:function(){layui.form.on("radio(setTheme)",function(e){url=Fun.url("ajax/setConfig"),code=a(e.elem).attr("name"),Fun.ajax({url:url,data:{value:e.value,code:code}},function(a){Fun.toastr.success(a.msg,function(){Fun.api.setStorage("siteTheme",e.value),window.location.reload()})},function(e){Fun.toastr.error(e.msg)})}),layui.form.on("radio(setTab)",function(e){if(name=a(e.elem).attr("name"),v=Fun.api.getStorage(name),v&&v===e.value)return!1;Fun.api.setStorage(name,e.value),u.initBodyTheme(name,value)}),layui.form.on("radio(setFrameTheme)",function(e){Fun.api.setStorage("setFrameTheme",e.value),window.location.reload()}),i.on("click",".layui-header .layui-layout-center li a",function(){var e=a(this).attr("menu-id");if(e){var t=layui.layer.load();u.checkScreen()&&(a(window).width()>768&&a(window).width()<=1024?l.hasClass(n)?l.toggleClass(n):l.toggleClass("fun-app"):(l.toggleClass(n),l.toggleClass("fun-app"),a(this).parents("li").children(".layui-nav-child").removeClass("layui-show"))),a(".layui-side-menu").find('.layui-nav-tree[menu-id="'+e+'"]').removeClass("layui-hide"),a(".layui-side-menu").find('.layui-nav-tree[menu-id="'+e+'"]').siblings("ul").not('[data-rel="external"]').addClass("layui-hide"),layui.layer.close(t)}}),i.on("mouseover click",".layui-nav-header .layui-nav li>a",function(){a(this).parent("li").siblings().children(".layui-nav-child").removeClass("layui-show")}),i.on("click","*[lay-id]",function(){var e=a(this),t=e.prop("target"),o=e.data("url")?e.data("url"):e.data("iframe"),i=e.attr("data-id"),r=e.data("tips")||a(this).attr("title"),s=e.find("i").attr("class"),f=!!e.has("data-iframe");i=i||o,e.siblings("li").removeClass("layui-this");var d=e.parent(),c=e.parents(".layui-nav-header"),h=d.siblings("li"),m=d.siblings("li.active").children(".layui-nav-child");if(!e.data("url")&&c.length>0)return!1;if(e.data("url")){if(d.addClass("active"),h.hasClass("active")&&(m.animate({height:0},function(){m.removeAttr("style")}),d.siblings("li.active").not("[menu-id]").animate({height:"55px"},function(){d.siblings("li.active").removeClass("active")})),"_blank"===t)return window.open(o,"_blank"),!1;var y={layId:i,text:r,url:o,icon:s,iframe:f};u.addTab(y),u.checkScreen()&&l.removeClass(n).addClass("fun-app"),m.attr("style","display:block!important;"),u.listenFrameTheme()}else{var g=d.children(".layui-nav-child"),v=g.height();if(!u.checkScreen()&&a("."+n).length>0)return!1;g.css({display:"block"}),d.hasClass("layui-nav-itemed")?(d.addClass("active"),d.height("auto"),h.hasClass("active")&&(m.css("display","block"),m.animate({height:0},function(){m.removeAttr("style")}),d.siblings("li.active").animate({height:"auto"},function(){d.siblings("li.active").removeClass("active")})),g.height(0),g.animate({height:v+"px"},function(){g.css({height:"auto"})})):(d.removeClass("active"),g.animate({height:0},function(){g.removeAttr("style")}))}}),i.on("click","*[lay-event]",function(){var e=a(this),t=e.attr("lay-event");u.events[t]&&u.events[t].call(this,e)}),i.on("mouseenter",".layui-side-shrink .layui-nav-tree>.layui-nav-item,.layui-side-shrink .layui-nav-itemed",function(){var e=a(this);if(!u.checkScreen()){var t=e.offset().top;e.removeClass("layui-nav-itemed"),e.addClass("layui-nav-hover"),e.children("dl").addClass("layui-nav-child-drop"),e.children("dl").css("top",t+"px"),u.events.showtips(e,1)}}).on("mouseleave",".layui-side-shrink .layui-nav-tree>.layui-nav-item",function(){var e=a(this);e.removeClass("layui-nav-hover"),e.find("dl").removeClass("layui-nav-child-drop"),e.find("dl").removeAttr("style"),u.events.showtips(e,2)}),i.on("mouseenter",".layui-side-shrink .layui-side-menu .layui-nav-hover dd",function(){var e=a(this);if(!u.checkScreen()&&e.find("dl")){var t=e.offset().top,o=e.offset().left+e.width();e.children("dl").addClass("layui-nav-child-drop"),e.children("dl").css("top",t+"px"),e.children("dl").css("left",+o+"px")}}).on("mouseleave",".layui-side-shrink .layui-side-menu .layui-nav-child-drop,.layui-side-shrink .layui-side-menu .layui-nav-child-drop>dd",function(){var e=a(this);e.find("dl").removeClass("layui-nav-child-drop"),e.siblings("dd").children("dl").removeClass("layui-nav-child-drop"),e.find("dl").removeAttr("style")}),layui.dropdown.render({elem:"#layui-tab-header",trigger:"contextmenu",isAllowSpread:!1,style:"width: 130px",id:"layui-tab-header-menu",data:[{title:'<a href="javascript:;" lay-event="refresh"><i class="layui-icon layui-icon-refresh"></i>  刷新当前页</a>',id:"refresh"},{type:"-"},{title:'<a href="javascript:;" lay-event="closeThisTabs">&nbsp;<i class="layui-icon layui-icon-close-fill"></i>  关闭当前页</a>',id:"closeThisTabs"},{type:"-"},{title:'<a href="javascript:;" lay-event="closeOtherTabs">&nbsp;<i class="layui-icon layui-icon-unlink"></i>  关闭其它页</a>',id:"closeOtherTabs"},{type:"-"},{title:'<a href="javascript:;" lay-event="closeAllTabs">&nbsp;<i class="layui-icon layui-icon-close"></i>  关闭全部页</a>',id:"closeAllTabs"}]}),i.on("click",".layui-body,.layui-header,.layui-side-menu,#layui-app-tabs .layui-tab,.layui-right-shade",function(){a(".layui-dropdown").remove()}),a(window).on("resize",function(){u.initBodyTheme()})}}};e("Backend",u)});